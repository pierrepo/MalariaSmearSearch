{% extends "skeleton.html" %}

{% block head %}

    {{super()}}

    <style>

        #chunk{
            /* According to Cropperjs documentation :
             "Limit image width to avoid overflow the container
             This rule is very important, please do not ignore this! "*/
            max-width: 100%;
        }
        #add-new{
            display: none;
        }
        #hidden-konva{
            display: none; /*no space allocated for it between the other tags*/
        }

    </style>
{% endblock %}

{% block content %}
    <button value = 'view' id = 'toggle-mode' class='glyphicon glyphicon-plus'>Annotate</button>

    <div id="hidden-konva"></div>
    <div id="konva"></div>

    <div style="height: 500px; width: 500px;">
        <img id='chunk' alt="a chunk of an uploaded image" >
    </div>

    <ul id = "annotations-list">

        <li>
            an annotation
        </li>
    </ul>


    <form action="" id="add-new">
        <input type="number" id = 'add-sel-x' readonly>
        <input type="number" id = 'add-sel-y' readonly>
        <input type="number" id = 'add-sel-width' readonly>
        <input type="number" id = 'add-sel-height' readonly>

        <select  id="new-list-item-text" name="new-list-item-text">
            <option selected="selected" disabled="disabled">Select an annotation</option>
            <option value="parasite">parasite</option>
            <option value="red">red cell</option>
            <option value="white">white cell</option>
            <option value="other">other</option>
        </select>

        <input type="submit" id="add-new-submit" value="Add" class="button" />

    </form>

{% endblock %}

{% block imports %}
    {{super()}}
    <link  href="https://cdnjs.cloudflare.com/ajax/libs/cropper/2.3.4/cropper.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/2.3.4/cropper.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jeditable.js/1.7.3/jeditable.min.js"></script>
    <script src="https://cdn.rawgit.com/konvajs/konva/1.3.0/konva.js"></script>

    <script>
        img_source = '{{url_for("static", filename = "test/"+ "1_0_0.jpg" )}}' ;
    </script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/annotation.js') }}"></script>

{% endblock %}
